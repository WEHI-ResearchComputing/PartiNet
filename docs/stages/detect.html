<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-stages/detect" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">2. Detect | PartiNet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wehi-researchcomputing.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://wehi-researchcomputing.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://wehi-researchcomputing.github.io/docs/stages/detect"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="2. Detect | PartiNet"><meta data-rh="true" name="description" content="PartiNet uses a modified version of an adaptive YOLO architecture called DynamicDet (Lin et al., 2023) to identify particles in cryo-EM micrographs. This stage provides highly accurate particle detection with customizable confidence and overlap thresholds."><meta data-rh="true" property="og:description" content="PartiNet uses a modified version of an adaptive YOLO architecture called DynamicDet (Lin et al., 2023) to identify particles in cryo-EM micrographs. This stage provides highly accurate particle detection with customizable confidence and overlap thresholds."><link data-rh="true" rel="icon" href="/img/gears-gear-svgrepo-com.svg"><link data-rh="true" rel="canonical" href="https://wehi-researchcomputing.github.io/docs/stages/detect"><link data-rh="true" rel="alternate" href="https://wehi-researchcomputing.github.io/docs/stages/detect" hreflang="en"><link data-rh="true" rel="alternate" href="https://wehi-researchcomputing.github.io/docs/stages/detect" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Picking","item":"https://wehi-researchcomputing.github.io/docs/category/picking"},{"@type":"ListItem","position":2,"name":"2. Detect","item":"https://wehi-researchcomputing.github.io/docs/stages/detect"}]}</script><link rel="stylesheet" href="/assets/css/styles.a3f97d5e.css">
<script src="/assets/js/runtime~main.df7b6c30.js" defer="defer"></script>
<script src="/assets/js/main.2cfbb33d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/gears-gear-svgrepo-com.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/gears-gear-svgrepo-com.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/gears-gear-svgrepo-com.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">PartiNet</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/WEHI-ResearchComputing/PartiNet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://huggingface.co/MihinP/PartiNet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Model Weights<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/picking">Picking</a><button aria-label="Collapse sidebar category &#x27;Picking&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/stages/denoise">1. Denoise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/stages/detect">2. Detect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/stages/star">3. STAR</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/training">Training</a><button aria-label="Expand sidebar category &#x27;Training&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/picking"><span>Picking</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">2. Detect</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>2. Detect</h1></header>
<p>PartiNet uses a modified version of an adaptive YOLO architecture called <em>DynamicDet</em> (Lin et al., 2023) to identify particles in cryo-EM micrographs. This stage provides highly accurate particle detection with customizable confidence and overlap thresholds.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick Start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick Start" title="Direct link to Quick Start">â€‹</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Local Installation</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">partinet detect </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--weight</span><span class="token plain"> /path/to/downloaded/model_weights.pt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--source</span><span class="token plain"> /data/partinet_picking/denoised </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--device</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0,1</span><span class="token plain">,2,3 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--project</span><span class="token plain"> /data/partinet_picking</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Apptainer/Singularity</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apptainer </span><span class="token builtin class-name">exec</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--nv</span><span class="token plain"> --no-home </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-B</span><span class="token plain"> /data oras://ghcr.io/wehi-researchcomputing/partinet:main-singularity partinet detect </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--weight</span><span class="token plain"> /path/to/downloaded/model_weights.pt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--source</span><span class="token plain"> /data/partinet_picking/denoised </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--device</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0,1</span><span class="token plain">,2,3 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--project</span><span class="token plain"> /data/partinet_picking</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Docker</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--gpus</span><span class="token plain"> all </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> /data:/data </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ghcr.io/wehi-researchcomputing/partinet:main partinet detect </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--weight</span><span class="token plain"> /path/to/downloaded/model_weights.pt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--source</span><span class="token plain"> /data/partinet_picking/denoised </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--device</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0,1</span><span class="token plain">,2,3 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--project</span><span class="token plain"> /data/partinet_picking</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="required-parameters">Required Parameters<a href="#required-parameters" class="hash-link" aria-label="Direct link to Required Parameters" title="Direct link to Required Parameters">â€‹</a></h3>
<table><thead><tr><th>Parameter</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><code>--weight</code></td><td>Path to pre-trained model weights file</td><td><code>/data/models/partinet_yolov7_weights.pt</code></td></tr><tr><td><code>--source</code></td><td>Path to directory containing micrographs to process</td><td><code>/data/partinet_picking/denoised</code></td></tr><tr><td><code>--project</code></td><td>Path to project directory where outputs will be saved</td><td><code>/data/partinet_picking</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="customizable-parameters">Customizable Parameters<a href="#customizable-parameters" class="hash-link" aria-label="Direct link to Customizable Parameters" title="Direct link to Customizable Parameters">â€‹</a></h3>
<table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th><th>Default</th><th>Notes</th></tr></thead><tbody><tr><td><code>--conf-thres</code></td><td>float</td><td>Confidence threshold for detection (0.0-1.0)</td><td><code>0.1</code></td><td>Lower = more detections, higher = fewer but more confident</td></tr><tr><td><code>--iou-thres</code></td><td>float</td><td>IoU threshold for non-maximum suppression (0.0-1.0)</td><td><code>0.2</code></td><td>Higher = more aggressive overlap removal</td></tr><tr><td><code>--device</code></td><td>string</td><td>GPU devices to use (comma-separated)</td><td><code>0,1,2,3</code></td><td>Use <code>0</code> for single GPU, <code>0,1</code> for two GPUs, etc. Leave empty for CPU only</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="parameter-configuration-guide">Parameter Configuration Guide<a href="#parameter-configuration-guide" class="hash-link" aria-label="Direct link to Parameter Configuration Guide" title="Direct link to Parameter Configuration Guide">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="confidence-threshold---conf-thres">Confidence Threshold (<code>--conf-thres</code>)<a href="#confidence-threshold---conf-thres" class="hash-link" aria-label="Direct link to confidence-threshold---conf-thres" title="Direct link to confidence-threshold---conf-thres">â€‹</a></h3>
<p>The confidence threshold determines the minimum confidence score required for a detection to be considered valid. Even with denoised micrographs, overall confidence will be low due to low SNR. It is not recommended to increase this above 0.5. We recommend setting this threshold quite low <code>0.0-0.3</code> during this stage, and then filtering during STAR file generation.</p>
<p><strong>Recommended starting values:</strong></p>
<ul>
<li><strong>New datasets, small proteins, low defocus</strong>: <code>0.0-0.2</code></li>
<li><strong>Large proteins/complexes, higher defocus</strong>: <code>0.2-0.5</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="iou-threshold---iou-thres">IoU Threshold (<code>--iou-thres</code>)<a href="#iou-threshold---iou-thres" class="hash-link" aria-label="Direct link to iou-threshold---iou-thres" title="Direct link to iou-threshold---iou-thres">â€‹</a></h3>
<p>The Intersection over Union (IoU) threshold controls how aggressively overlapping detections are removed. The higher the value, the more that overlapping particles for removed</p>
<p><strong>Recommended starting value</strong>: <code>0.2</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="model-weights">Model Weights<a href="#model-weights" class="hash-link" aria-label="Direct link to Model Weights" title="Direct link to Model Weights">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-trained-weights">Pre-trained Weights<a href="#pre-trained-weights" class="hash-link" aria-label="Direct link to Pre-trained Weights" title="Direct link to Pre-trained Weights">â€‹</a></h3>
<p>PartiNet model weights are available on <a href="https://huggingface.co/MihinP/PartiNet" target="_blank" rel="noopener noreferrer">HuggingFace</a>.
Weights can be downloaded through the browser or through CLI via Git LFS</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Verify Git LFS is installed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> lfs </span><span class="token parameter variable" style="color:#36acaa">--help</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> PartiNet_weights</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> PartiNet_weights</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@hf.co:MihinP/PartiNet</span><br></span></code></pre></div></div>
<p>You will see two <code>.pt</code> files available: <code>denoised_micrographs.pt</code> and <code>raw_micrographs.pt</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-model-weights">Custom Model Weights<a href="#custom-model-weights" class="hash-link" aria-label="Direct link to Custom Model Weights" title="Direct link to Custom Model Weights">â€‹</a></h3>
<p>If you have <a href="/docs/category/training">trained your own PartiNet model</a> you may use custom weights:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">partinet detect </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --backbone-detector yolov7-w6 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--weight</span><span class="token plain"> /path/to/your/custom_weights.pt </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--source</span><span class="token plain"> /data/partinet_picking/denoised </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --conf-thres </span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --iou-thres </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--device</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0,1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--project</span><span class="token plain"> /data/partinet_picking</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="input-requirements">Input Requirements<a href="#input-requirements" class="hash-link" aria-label="Direct link to Input Requirements" title="Direct link to Input Requirements">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="supported-formats">Supported Formats<a href="#supported-formats" class="hash-link" aria-label="Direct link to Supported Formats" title="Direct link to Supported Formats">â€‹</a></h3>
<ul>
<li><strong>PNG files</strong> (<code>.png</code>)</li>
<li><strong>JPEG files</strong> (<code>.jpg</code>, <code>.jpeg</code>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="directory-structure">Directory Structure<a href="#directory-structure" class="hash-link" aria-label="Direct link to Directory Structure" title="Direct link to Directory Structure">â€‹</a></h3>
<p>Your source directory should contain micrographs:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">denoised/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ micrograph_001.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ micrograph_002.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ micrograph_003.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ ...</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a href="#output" class="hash-link" aria-label="Direct link to Output" title="Direct link to Output">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="directory-structure-1">Directory Structure<a href="#directory-structure-1" class="hash-link" aria-label="Direct link to Directory Structure" title="Direct link to Directory Structure">â€‹</a></h3>
<p>After detection, your project directory will contain:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">partinet_picking/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ motion_corrected/          # ğŸ“ Your input micrographs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ micrograph1.mrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ micrograph2.mrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ denoised/                  # ğŸ§¹ Created by denoise stage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ micrograph1.mrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ micrograph2.mrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ exp/                       # ğŸ¯ Created by detect stage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ labels/               # ğŸ“‹ Detection coordinates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ micrograph1.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ micrograph2.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ micrograph1.mrc       # ğŸ–¼ï¸ Micrographs with detections drawn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ micrograph2.mrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ partinet_detect.log</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-file-output">Log File Output<a href="#log-file-output" class="hash-link" aria-label="Direct link to Log File Output" title="Direct link to Log File Output">â€‹</a></h3>
<p>The <code>partinet_detect.log</code> file provides detailed processing information:</p>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:07 | INFO | Using devices: [&#x27;cuda:0&#x27;, &#x27;cuda:1&#x27;, &#x27;cuda:2&#x27;, &#x27;cuda:3&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:11 | INFO | Model loaded on cuda:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:15 | INFO | Model loaded on cuda:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:17 | INFO | Model loaded on cuda:2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:20 | INFO | Model loaded on cuda:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:21 | INFO | [cuda:0] Processing 000000633063778279389_FoilHole_30903560_Data_30900510_30900512_20201031_010810_fractions_patch_aligned.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:21 | INFO | [cuda:1] Processing 000005251007454303721_FoilHole_30909875_Data_30900510_30900512_20201101_040227_fractions_patch_aligned.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:21 | INFO | [cuda:2] Processing 000012049843629116854_FoilHole_30902824_Data_30900510_30900512_20201030_230632_fractions_patch_aligned.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:22 | INFO | [cuda:3] Processing 000018235333323367981_FoilHole_30905009_Data_30900510_30900512_20201031_082713_fractions_patch_aligned.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:24 | INFO | [cuda:1] 000005251007454303721_FoilHole_30909875_Data_30900510_30900512_20201101_040227_fractions_patch_aligned.png: 94 particles, 3516.2 ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:24 | INFO | [cuda:1] Processing 000022392129605454366_FoilHole_30903097_Data_30900534_30900536_20201031_002940_fractions_patch_aligned.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-10 16:08:25 | INFO | [cuda:2] 000012049843629116854_FoilHole_30902824_Data_30900510_30900512_20201030_230632_fractions_patch_aligned.png: 272 particles, 3604.4 ms</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="output-file-formats">Output File Formats<a href="#output-file-formats" class="hash-link" aria-label="Direct link to Output File Formats" title="Direct link to Output File Formats">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="detection-coordinates-labelstxt">Detection Coordinates (<code>labels/*.txt</code>)<a href="#detection-coordinates-labelstxt" class="hash-link" aria-label="Direct link to detection-coordinates-labelstxt" title="Direct link to detection-coordinates-labelstxt">â€‹</a></h4>
<p>Each txt file corresponds to a single micrograph. Each line represents one detection in YOLO format:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class_id x_center y_center width height confidence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 0.5234 0.3456 0.0234 0.0198 0.8567</span><br></span></code></pre></div></div>
<p>Where coordinates are normalized (0.0-1.0) relative to micrograph dimensions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s Next<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s Next" title="Direct link to What&#x27;s Next">â€‹</a></h2>
<ul>
<li><a href="/docs/stages/star">STAR</a></li>
</ul>
<p>Congratulations! You have picked particles from your micrographs, you can now move to the final stage with <a href="/docs/stages/star">STAR</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">â€‹</a></h2>
<p>Lin, Z., Wang, Y., Zhang, J., &amp; Chu, X. (2023). DynamicDet: A Unified Dynamic Architecture for Object Detection (arXiv:2304.05552). arXiv. <a href="https://doi.org/10.48550/arXiv.2304.05552" target="_blank" rel="noopener noreferrer">https://doi.org/10.48550/arXiv.2304.05552</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="see-also">See Also<a href="#see-also" class="hash-link" aria-label="Direct link to See Also" title="Direct link to See Also">â€‹</a></h2>
<ul>
<li><a href="/docs/stages/denoise">Denoise</a></li>
<li><a href="/docs/stages/star">STAR</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/stages/detect.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/stages/denoise"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">1. Denoise</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/stages/star"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">3. STAR</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick Start</a></li><li><a href="#parameters" class="table-of-contents__link toc-highlight">Parameters</a><ul><li><a href="#required-parameters" class="table-of-contents__link toc-highlight">Required Parameters</a></li><li><a href="#customizable-parameters" class="table-of-contents__link toc-highlight">Customizable Parameters</a></li></ul></li><li><a href="#parameter-configuration-guide" class="table-of-contents__link toc-highlight">Parameter Configuration Guide</a><ul><li><a href="#confidence-threshold---conf-thres" class="table-of-contents__link toc-highlight">Confidence Threshold (<code>--conf-thres</code>)</a></li><li><a href="#iou-threshold---iou-thres" class="table-of-contents__link toc-highlight">IoU Threshold (<code>--iou-thres</code>)</a></li></ul></li><li><a href="#model-weights" class="table-of-contents__link toc-highlight">Model Weights</a><ul><li><a href="#pre-trained-weights" class="table-of-contents__link toc-highlight">Pre-trained Weights</a></li><li><a href="#custom-model-weights" class="table-of-contents__link toc-highlight">Custom Model Weights</a></li></ul></li><li><a href="#input-requirements" class="table-of-contents__link toc-highlight">Input Requirements</a><ul><li><a href="#supported-formats" class="table-of-contents__link toc-highlight">Supported Formats</a></li><li><a href="#directory-structure" class="table-of-contents__link toc-highlight">Directory Structure</a></li></ul></li><li><a href="#output" class="table-of-contents__link toc-highlight">Output</a><ul><li><a href="#directory-structure-1" class="table-of-contents__link toc-highlight">Directory Structure</a></li><li><a href="#log-file-output" class="table-of-contents__link toc-highlight">Log File Output</a></li><li><a href="#output-file-formats" class="table-of-contents__link toc-highlight">Output File Formats</a></li></ul></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s Next</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See Also</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Important Pages</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Installation</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/WEHI-ResearchComputing/PartiNet" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://huggingface.co/MihinP/PartiNet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Model Weights<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2026 The Walter and Eliza Hall Institute. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>